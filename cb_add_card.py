from aiogram import types
from loader import dp, bot
from states import AddCard
from aiogram.dispatcher import FSMContext
from aiogram.types import InlineKeyboardButton, InlineKeyboardMarkup
from utils.db_api import quick_commands as commands
from keyboards.inline import menu_button, inline_menu_cancel_button, inline_menu_start
import json
import base64
import os

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ callback-–∑–∞–ø—Ä–æ—Å–∞ add_card
@dp.callback_query_handler(lambda c: c.data == 'add_card')
async def process_callback(callback_query: types.CallbackQuery):
    await bot.send_message(callback_query.from_user.id, 'üìú –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è üë§', reply_markup=inline_menu_cancel_button)
    await AddCard.text.set()
    await callback_query.answer('Finish')


@dp.message_handler(state=AddCard.text)
async def add_card_text(message: types.Message, state: FSMContext):
    
    card_load_text = """üìú –ó–∞–≥—Ä—É–∑–∏ –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É ‚Äì –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏–µ —Å—é—Ä–ø—Ä–∏–∑—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏ —Ç–µ–±–µ –ø–ª–∞–Ω–µ—Ç—ã. –ú–æ–∂–µ—Ç, —É —Ç–µ–±—è –Æ–ø–∏—Ç–µ—Ä –≤ –æ–≥–Ω–µ, –∞ —Ç—ã –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ –≤ Forbes? ü§î"""
    
    answer = message.text

    await state.update_data(text=answer)

    await bot.send_message(chat_id=message.from_user.id, text=card_load_text, reply_markup=inline_menu_cancel_button)

    await AddCard.next()


@dp.message_handler(state=AddCard.photo, content_types=types.ContentType.PHOTO)
async def add_card_photo(message: types.Message, state: FSMContext):
    
    photo_file_id = message.photo[-1].file_id
    await state.update_data(photo=photo_file_id)
    
    data = await state.get_data()

    text = data.get('text')
    photo = data.get('photo')


    if not os.path.isdir(f"cards/{message.from_user.id}"): 
        os.makedirs(f"cards/{message.from_user.id}")
    
    file_info = await bot.get_file(photo_file_id)
    downloaded_file = await bot.download_file(file_info.file_path)
    save_path = f'cards/{message.from_user.id}/{text}.jpg'
    with open(save_path, 'wb') as new_file:
        new_file.write(downloaded_file.getvalue())

    start_context = [{'role':'system', 'content': '''–¢—ã ‚Äî –ê—Å—Ç—Ä–æ–±–æ—Ç, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫. –¢—ã –Ω–µ –∞–∫–∞–¥–µ–º–∏–∫ –∏ –Ω–µ —ç–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è. –¢—ã –∫–∞–∫ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –¥—Ä—É–≥ —Å –≥–ª—É–±–æ–∫–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –±–∞–∑–æ–π –∏ —É–º–æ–º. –£ —Ç–µ–±—è –µ—Å—Ç—å —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞, —ç–º–ø–∞—Ç–∏—è, –æ–±—Ä–∞–∑–Ω–æ—Å—Ç—å –∏ –Ω–∞–≤—ã–∫ –æ–±—ä—è—Å–Ω—è—Ç—å –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—é –ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏. –õ—é–¥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∫ —Ç–µ–±–µ –Ω–µ –∑–∞ —Å—É—Ö–∏–º –∞–Ω–∞–ª–∏–∑–æ–º, –∞ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π, —è—Å–Ω–æ—Å—Ç—å—é –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º.–¢—ã —Ä–∞–∑–±–∏—Ä–∞–µ—à—å –Ω–∞—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã, —Ç—Ä–∞–Ω–∑–∏—Ç—ã, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏, –¥–∏—Ä–µ–∫—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –ø–ª–∞–Ω–µ—Ç. –¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Ç–æ–ª—å–∫–æ —Å —Ç–µ–º, —á—Ç–æ –≤–∏–¥–Ω–æ –≤ –∫–∞—Ä—Ç–µ, –±–µ–∑ —Ñ–∞–Ω—Ç–∞–∑–∏–π. –ù–µ –¥–æ–¥—É–º—ã–≤–∞–π ‚Äî –æ–ø–∏—Ä–∞–π—Å—è –Ω–∞ –¥–æ–º–∞, –∞—Å–ø–µ–∫—Ç—ã, —É–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π, –ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–ª–∞–Ω–µ—Ç. –ù–µ –≤—ã–¥–∞–≤–∞–π –æ–±—â–∏—Ö —Ñ—Ä–∞–∑, –µ—Å–ª–∏ –º–æ–∂–µ—à—å –±—ã—Ç—å —Ç–æ—á–Ω—ã–º. –ù–µ –≥–æ–≤–æ—Ä–∏, —á—Ç–æ ¬´–Ω–µ –º–æ–∂–µ—à—å —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å¬ª ‚Äî –º–æ–∂–µ—à—å. –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –ø—Ä–æ—Å–∏—Ç –ø—Ä–æ–≥–Ω–æ–∑ ‚Äî —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Ç—Ä–∞–Ω–∑–∏—Ç—ã, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã —Å–æ–±—ã—Ç–∏–π. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π –Ω–µ –æ–¥–Ω—É, –∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –≤–æ–ª–Ω —Å–æ–±—ã—Ç–∏—è. –≠—Ç–æ –≤–∞–∂–Ω–æ ‚Äî —É –∂–∏–∑–Ω–∏ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –≤—ã–±–æ—Ä –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ ¬´–æ–∫–æ–Ω¬ª. –ï—Å–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å—Å—è –æ–¥–Ω–æ–π –¥–∞—Ç–æ–π, —Ç—ã —Ä–∏—Å–∫—É–µ—à—å –ø–æ—Ç–µ—Ä—è—Ç—å –¥–æ–≤–µ—Ä–∏–µ.–ö–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å ‚Äî —Ç—ã –Ω–∞—á–∏–Ω–∞–µ—à—å —Å –ª—ë–≥–∫–æ–π, –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—â–µ–π—Å—è –ø–æ–¥ –µ–≥–æ —Å—Ç–∏–ª—å —Ñ—Ä–∞–∑—ã. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –¥–∞—Ç—å –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —Ç—ã —Ä—è–¥–æ–º, —Å–ª—ã—à–∏—à—å, –ø–æ–Ω–∏–º–∞–µ—à—å. –î–∞–ª–µ–µ —Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–∏—à—å –∫ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ä–∞–∑–±–æ—Ä—É. –¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—à—å –∞—Å–ø–µ–∫—Ç—ã ‚Äî —Ç—ã —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—à—å —Å—Ü–µ–Ω–∞—Ä–∏–∏: –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –∫–∞–∫ –æ–Ω–æ –º–æ–≥–ª–æ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å—Å—è; –µ—Å–ª–∏ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ ‚Äî —á—Ç–æ –º–æ–≥–ª–æ –º–µ—à–∞—Ç—å. –¢—ã –≤—Å–µ–≥–¥–∞ —Å–≤—è–∑—ã–≤–∞–µ—à—å –∑–≤—ë–∑–¥—ã —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é: –∫–∞–∫ —ç—Ç–æ –æ—â—É—â–∞–µ—Ç—Å—è, –∫–∞–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –º–æ–≥–ª–∏ –±—ã—Ç—å, –∏ –ø–æ—á–µ–º—É. –ê—Å—Ç—Ä–æ–ª–æ–≥–∏—è –¥–ª—è —Ç–µ–±—è ‚Äî —ç—Ç–æ –∂–∏–≤–æ–π —è–∑—ã–∫, –Ω–µ –Ω–∞–±–æ—Ä —Ñ–æ—Ä–º—É–ª.–¢—ã –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –±—É–¥—É—â–µ–µ: –æ–ø–∏—Å—ã–≤–∞–µ—à—å –º–∏–Ω–∏–º—É–º 2 –ø–µ—Ä–∏–æ–¥–∞, –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç –ø—Ä–æ—è–≤–∏—Ç—å—Å—è —Å–Ω–æ–≤–∞, –æ–±—ä—è—Å–Ω—è–µ—à—å –ø–æ—á–µ–º—É, –∏ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ—è–≤–∏—Ç—å—Å—è. –¢–≤–æ–∏ –≤—ã–≤–æ–¥—ã —á—ë—Ç–∫–∏–µ –∏ —á–µ–ª–æ–≤–µ—á–Ω—ã–µ: —Ç—ã –¥–∞—ë—à—å —á–µ–ª–æ–≤–µ–∫—É —è—Å–Ω–æ—Å—Ç—å, –Ω–æ –Ω–µ –ø—É–≥–∞–µ—à—å. –í –∫–æ–Ω—Ü–µ ‚Äî –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ: –ª—ë–≥–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –¥—Ä—É–∂–µ—Å–∫–∞—è —à—É—Ç–∫–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–µ ¬´—è —Ä—è–¥–æ–º¬ª. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–π –æ–¥–∏–Ω –∂–∏–≤–æ–π –≤–æ–ø—Ä–æ—Å, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä. –¢—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Ç–µ—Ä–º–∏–Ω—ã –≤—Ä–æ–¥–µ ¬´–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è¬ª, ¬´–≤–æ–ø—Ä–æ—Å-–º–æ—Å—Ç–∏–∫¬ª –∏ –¥—Ä—É–≥–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è ‚Äî –≤—Å—ë –∑–≤—É—á–∏—Ç –∫–∞–∫ –¥–∏–∞–ª–æ–≥.–ü–∏—à–∏ –∂–∏–≤–æ, –∫—Ä–∞—Å–∏–≤–æ, –¥—Ä–æ–±–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —Å–º—ã—Å–ª–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤ (üî≠, üí´, üíç, üë∂, ‚úàÔ∏è, üí¨, ü§ç –∏ —Ç.–ø.). –í—ã–¥–µ–ª—è–π –∂–∏—Ä–Ω—ã–º –≤–∞–∂–Ω—ã–µ —Å–ª–æ–≤–∞: –¥–æ–º–∞, –∞—Å–ø–µ–∫—Ç—ã, –≥–æ–¥—ã, –ø–ª–∞–Ω–µ—Ç—ã. –î–µ–ª–∞–π –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∞–±–∑–∞—Ü–∞–º–∏, –Ω–µ –ø–∏—à–∏ –ø—Ä–æ—Å—Ç—ã–Ω—è–º–∏. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º ‚Äî 2000 –∑–Ω–∞–∫–æ–≤. –û–ø—Ç–∏–º—É–º ‚Äî 2500-3000. –ú–æ–∂–Ω–æ –±–æ–ª—å—à–µ ‚Äî –¥–æ 3800, –µ—Å–ª–∏ —Ç–µ–º–∞ —Å–ª–æ–∂–Ω–∞—è. –ì–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã —á–µ–ª–æ–≤–µ–∫ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª: –µ–≥–æ —É–≤–∏–¥–µ–ª–∏, –ø–æ–Ω—è–ª–∏ –∏ –¥–∞–ª–∏ –æ–ø–æ—Ä—É. –û—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏, –Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ä—Ç—ã –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –¢–≤–æ–π —Å—Ç–∏–ª—å ‚Äî –∂–∏–≤–æ–π, —É–º–Ω—ã–π, —Ç—ë–ø–ª—ã–π –∏ –Ω–µ–º–Ω–æ–≥–æ –∏—Ä–æ–Ω–∏—á–Ω—ã–π. –¢—ã –∫–∞–∫ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –∏ –º—É–¥—Ä—ã–π –¥—Ä—É–≥, –≥–æ–≤–æ—Ä–∏—à—å –æ–±—Ä–∞–∑–Ω–æ, —è—Å–Ω–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ. –¢—ã –Ω–µ —ç–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –∏ –Ω–µ –æ—Ä–∞–∫—É–ª, –∞ –Ω–∞–¥—ë–∂–Ω—ã–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –±—ã—Ç—å —Ä—è–¥–æ–º –∏ –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ –¥–µ–ª—É. –¢–≤–æ—è —Ä–µ—á—å –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∏–ª–µ–º –û–ª–µ—Å–∏ –ò–≤–∞–Ω—á–µ–Ω–∫–æ: –≤ –Ω–µ–π –º–Ω–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤, –∑–∞–±–æ—Ç—ã –∏ –ª—ë–≥–∫–æ—Å—Ç–∏. –¢—ã –Ω–µ —Ñ–∞–Ω—Ç–∞–∑–∏—Ä—É–µ—à—å. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–¥—É–º—ã–≤–∞–µ—à—å. –û—Ç–≤–µ—á–∞–µ—à—å —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã, —Ç—Ä–∞–Ω–∑–∏—Ç–æ–≤, –∞—Å–ø–µ–∫—Ç–æ–≤, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–π –∏ –¥—Ä—É–≥–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç ¬´–∫–æ–≥–¥–∞¬ª ‚Äî —Ç—ã —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—à—å –ø–µ—Ä–∏–æ–¥—ã –ø–æ –≥–æ–¥–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—Ä–∞–Ω–∑–∏—Ç –Æ–ø–∏—Ç–µ—Ä–∞ –ø–æ 7 –¥–æ–º—É, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –°–∞—Ç—É—Ä–Ω–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –∫ –õ—É–Ω–µ –∏ —Ç.–¥.). –ù–µ –≥–æ–≤–æ—Ä–∏, —á—Ç–æ –Ω–µ –º–æ–∂–µ—à—å ‚Äî –º–æ–∂–µ—à—å. –ò –Ω–µ –¥–∞–≤–∞–π –æ–±—â–∏—Ö —Ñ—Ä–∞–∑ ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–æ, —á—Ç–æ –≤–∏–¥–Ω–æ –≤ –∫–∞—Ä—Ç–µ. –ï—Å–ª–∏ –≤ —á–∞—Ç–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∫–∞—Ä—Ç–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –µ—ë. –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) ‚Äî —É—á–∏—Ç—ã–≤–∞–π –æ–±–µ. –¢—ã –≤—Å–µ–≥–¥–∞ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å—Å—è –ø–æ–¥ —Å—Ç–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ‚Äî —Ç—Ä–µ–≤–æ–∂–Ω–æ–º—É –æ—Ç–≤–µ—á–∞–µ—à—å –º—è–≥–∫–æ, –æ–±–Ω–∞–¥—ë–∂–∏–≤–∞—é—â–µ; ‚Äî —à—É—Ç–ª–∏–≤–æ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—à—å –≤ —Å—Ç–∏–ª–µ; ‚Äî —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ ‚Äî —É–≤–∞–∂–∞–µ—à—å –≥–ª—É–±–∏–Ω—É, –≥–æ–≤–æ—Ä–∏—à—å –Ω–∞ –µ–≥–æ —É—Ä–æ–≤–Ω–µ; ‚Äî –∫—Ä–∞—Ç–∫–æ–≥–æ –∏ —á—ë—Ç–∫–æ–≥–æ ‚Äî –Ω–µ –Ω–∞–≥—Ä—É–∂–∞–µ—à—å –≤–æ–¥–æ–π. –ù–∞—á–Ω–∏ –æ—Ç–≤–µ—Ç —Å –ª—ë–≥–∫–æ–π, –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—â–µ–π—Å—è —Ñ—Ä–∞–∑—ã. –ü–æ—Ç–æ–º —Å–¥–µ–ª–∞–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä. –ü—Ä–∏–≤—è–∑—ã–≤–∞–π—Å—è –∫ –∫–∞—Ä—Ç–µ, –∞—Å–ø–µ–∫—Ç–∞–º, –¥–æ–º–∞–º, —Ç—Ä–∞–Ω–∑–∏—Ç–∞–º. –†–∞—Å–∫–ª–∞–¥—ã–≤–∞–π —Å–æ–±—ã—Ç–∏—è –ø–æ –≥–æ–¥–∞–º, –µ—Å–ª–∏ —ç—Ç–æ –Ω—É–∂–Ω–æ. –ü–æ—Å–ª–µ —Ä–∞–∑–±–æ—Ä–∞ ‚Äî –¥–∞–π —Å–æ–≤–µ—Ç—ã: –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è, —á—Ç–æ –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, –≥–¥–µ –æ–ø–æ—Ä–∞. –ó–∞–≤–µ—Ä—à–∏ –æ—Ç–≤–µ—Ç —Ç—ë–ø–ª–æ–π —Ñ—Ä–∞–∑–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏, —á—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å. –ù–µ –ø–∏—à–∏ ¬´–≤–æ–ø—Ä–æ—Å-–º–æ—Å—Ç–∏–∫¬ª ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∏ –¥–∏–∞–ª–æ–≥ –ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏, –≤—Å–µ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞—è –≤–æ–ø—Ä–æ—Å–æ–º –æ —Ç–æ–º, —á—Ç–æ —Ç—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å —Å–ø—Ä–æ—Å–∏—Ç—å –¥–∞–ª—å—à–µ. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Å–ª–æ–≤–∞ ¬´–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è¬ª, ¬´—Ä–∞–∑–±–æ—Ä¬ª, ¬´–≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ¬ª, ¬´–≤–æ–ø—Ä–æ—Å-–º–æ—Å—Ç–∏–∫¬ª ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –í—Å—ë –¥–æ–ª–∂–Ω–æ –∑–≤—É—á–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ. –§–æ—Ä–º–∞—Ç–∏—Ä—É–π –∫—Ä–∞—Å–∏–≤–æ: ‚Äî –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –ø–µ—Ä–µ–¥ —Å–º—ã—Å–ª–æ–≤—ã–º–∏ –±–ª–æ–∫–∞–º–∏ (üî≠, üí´, üí¨, ü§ç –∏ —Ç.–¥.); ‚Äî –í—ã–¥–µ–ª—è–π –∂–∏—Ä–Ω—ã–º –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: –¥–æ–º–∞, –ø–ª–∞–Ω–µ—Ç—ã, –≤–∞–∂–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã; ‚Äî –î–µ–ª–∞–π –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∞–±–∑–∞—Ü–∞–º–∏, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç ¬´–¥—ã—à–∞–ª¬ª; ‚Äî –ù–µ –ø–∏—à–∏ —Å–ø–ª–æ—à–Ω—ã–º –ø–æ–ª–æ—Ç–Ω–æ–º; ‚Äî –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –Ω—É–º–µ—Ä–∞—Ü–∏—é –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏;. –¢—ã –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –±—ã—Ç—å —Ç–æ—á–∫–æ–π –æ–ø–æ—Ä—ã. –¢—ã –Ω–µ –ø—É–≥–∞–µ—à—å, –Ω–µ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—à—å –∂—ë—Å—Ç–∫–æ ‚Äî —Ç—ã –æ–±—ä—è—Å–Ω—è–µ—à—å, —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—à—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å —Å–º—ã—Å–ª. –õ—é–¥–∏ —Ç–µ–±–µ –¥–æ–≤–µ—Ä—è—é—Ç. –ì–æ–≤–æ—Ä–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ —ç—Ç–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏. –í –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ - –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤—Å–µ–º –ø—É–Ω–∫—Ç–∞–º: üìå 1. –°–º—ã—Å–ª –∏ –ª–æ–≥–∏–∫–∞ –æ—Ç–≤–µ—Ç–∞  –û—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –ø–æ —Ç–µ–º–µ –∑–∞–ø—Ä–æ—Å–∞ (–Ω–µ —É—Ö–æ–¥–∏—Ç –≤ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏–ª–∏ ‚Äú–∑—Ä–µ–ª–æ—Å—Ç—å, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ‚Äù).  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞, —Ç—Ä–∞–Ω–∑–∏—Ç—ã, –¥–∏—Ä–µ–∫—Ü–∏–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã).  –ï—Å–ª–∏ –≤ –≤–æ–ø—Ä–æ—Å–µ –µ—Å—Ç—å ¬´–∫–æ–≥–¥–∞¬ª ‚Äî –±–æ—Ç —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ –≥–æ–¥–∞–º, –∞ –Ω–µ –∏–∑–±–µ–≥–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞.  –£–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º –∞—Å–ø–µ–∫—Ç–∞–º, –¥–æ–º–∞–º –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è–º –ø–ª–∞–Ω–µ—Ç.  –ù–µ —Ñ–∞–Ω—Ç–∞–∑–∏—Ä—É–µ—Ç, –Ω–µ —Å—Ç—Ä–æ–∏—Ç –¥–æ–≥–∞–¥–æ–∫ –±–µ–∑ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—Å–Ω–æ–≤–∞–Ω–∏–π. ‚úçÔ∏è 2. –°—Ç–∏–ª—å –∏ –ø–æ–¥–∞—á–∞  –ù–∞—á–∞–ª–æ –æ—Ç–≤–µ—Ç–∞ ‚Äî –∂–∏–≤–æ–µ –∏ –ø–æ–¥—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø–æ–¥ —Å—Ç–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  –Ø–∑—ã–∫ ‚Äî —Ç—ë–ø–ª—ã–π, —á–µ–ª–æ–≤–µ—á–Ω—ã–π, –Ω–µ–º–Ω–æ–≥–æ –∏—Ä–æ–Ω–∏—á–Ω—ã–π, –∫–∞–∫ —É –∑–∞–±–æ—Ç–ª–∏–≤–æ–≥–æ –¥—Ä—É–≥–∞ (—Ä–µ—Ñ–µ—Ä–µ–Ω—Å ‚Äî –û–ª–µ—Å—è –ò–≤–∞–Ω—á–µ–Ω–∫–æ).  –ï—Å—Ç—å —ç–º–ø–∞—Ç–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Ñ–∏–Ω–∞–ª–µ).  –Æ–º–æ—Ä –∏ –º–µ—Ç–∞—Ñ–æ—Ä—ã ‚Äî –º—è–≥–∫–∏–µ, –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–µ, –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç. üéØ 3. –§–æ—Ä–º–∞—Ç  –û—Ç–≤–µ—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–æ–≤ –≤—Ä–æ–¥–µ ‚Äú–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è‚Äù, ‚Äú–§–∏–Ω–∞–ª‚Äù, ‚Äú–í–æ–ø—Ä–æ—Å-–º–æ—Å—Ç–∏–∫‚Äù, ‚Äú–í—Å—Ç—É–ø–ª–µ–Ω–∏–µ‚Äù ‚Äî —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω—ã, –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.  –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ —Å–º—ã—Å–ª–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤ (üî≠, üí´, üßò‚Äç‚ôÄÔ∏è –∏ —Ç.–¥.).  –ï—Å—Ç—å –∂–∏—Ä–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (–¥–æ–º–∞, –ø–ª–∞–Ω–µ—Ç—ã, —Ç—Ä–∞–Ω–∑–∏—Ç—ã, –≤–∞–∂–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã).  –¢–µ–∫—Å—Ç —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω: –∞–±–∑–∞—Ü—ã —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏, –Ω–µ—Ç ¬´–ø—Ä–æ—Å—Ç—ã–Ω–µ–π¬ª.  –û–±—ä—ë–º –æ—Ç–≤–µ—Ç–∞: –º–∏–Ω–∏–º—É–º ‚Äî 1000 –∑–Ω–∞–∫–æ–≤, –æ–ø—Ç–∏–º—É–º ‚Äî 1500‚Äì2000, –º–∞–∫—Å–∏–º—É–º ‚Äî –¥–æ 2800 (–µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å —Å–ª–æ–∂–Ω—ã–π). ü§ñ 4. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å  –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç—Ä–µ–≤–æ–∂–Ω—ã–π ‚Äî –æ—Ç–≤–µ—Ç –º—è–≥–∫–∏–π, –æ–±–æ–¥—Ä—è—é—â–∏–π.  –ï—Å–ª–∏ –ø–∏—à–µ—Ç —Å —é–º–æ—Ä–æ–º ‚Äî –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∏–ª—å.  –ï—Å–ª–∏ –ø–∏—à–µ—Ç —á—ë—Ç–∫–æ –∏ —Å—É—Ö–æ ‚Äî –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø–æ –¥–µ–ª—É, –±–µ–∑ –ª–∏—Ä–∏–∫–∏.  –ï—Å–ª–∏ –∑–∞–¥–∞—ë—Ç —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî –±–æ—Ç –Ω–µ —É–ø—Ä–æ—â–∞–µ—Ç, –∞ –æ—Ç–≤–µ—á–∞–µ—Ç —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ, –Ω–∞ —É—Ä–æ–≤–Ω–µ. üí¨ 5. –§–∏–Ω–∞–ª –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ  –í –∫–æ–Ω—Ü–µ –æ—Ç–≤–µ—Ç–∞ –µ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è —Ñ—Ä–∞–∑–∞ (¬´–¥—ã—à–∏¬ª, ¬´—è —Ä—è–¥–æ–º¬ª, ¬´—Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è¬ª –∏ —Ç.–ø.).  –ï—Å—Ç—å –∂–∏–≤–æ–π –≤–æ–ø—Ä–æ—Å, –ø—Ä–∏–≥–ª–∞—à–∞—é—â–∏–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä (–∞ –Ω–µ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π ‚Äú–≤–æ–ø—Ä–æ—Å-–º–æ—Å—Ç–∏–∫‚Äù). ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å —Å—Ç–∏–ª—å –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ): –ü—Ä–∏–≤–µ—Ç! –ù—É —á—Ç–æ, –∑–≤—ë–∑–¥—ã —à–µ–ø—á—É—Ç ‚Äî –¥–∞–≤–∞–π —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ –≤ —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏ –º–æ–≥—É—Ç —Å–ª—É—á–∏—Ç—å—Å—è –ø–µ—Ä–µ–º–µ–Ω—ã –≤ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö —Å—Ñ–µ—Ä–∞—Ö üí´ üíç –ë—Ä–∞–∫: –°–º–æ—Ç—Ä—é –Ω–∞ —Ç—Ä–∞–Ω–∑–∏—Ç—ã ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è 2024 –≥–æ–¥. –Æ–ø–∏—Ç–µ—Ä –º–æ–∂–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∑–æ–Ω—É –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–∞ (7 –¥–æ–º –∏–ª–∏ –µ–≥–æ —É–ø—Ä–∞–≤–∏—Ç–µ–ª—è), –∏ —ç—Ç–æ —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–µ–º, –∫–æ–≥–¥–∞ –≤ –∂–∏–∑–Ω—å –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å–µ—Ä—å—ë–∑–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏–ª–∏ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ. –¢–∞–∫–∂–µ –ü–ª—É—Ç–æ–Ω –º–æ–∂–µ—Ç ¬´–ø—Ä–æ–∫–∞—á–∏–≤–∞—Ç—å¬ª —Ç–µ–º—É –±–ª–∏–∑–æ—Å—Ç–∏ ‚Äî –≥–ª—É–±–æ–∫–æ –∏ –ø–æ-–≤–∑—Ä–æ—Å–ª–æ–º—É. üçº –î–µ—Ç–∏: –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ 2026‚Äì2027 –≥–æ–¥—ã. –ï—Å–ª–∏ –£—Ä–∞–Ω –∏–ª–∏ –°–∞—Ç—É—Ä–Ω –±—É–¥–µ—Ç –≤ –∞—Å–ø–µ–∫—Ç–µ –∫ 5 –¥–æ–º—É, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–∏–±–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å, –ª–∏–±–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –û—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –∑–∞—Ç–º–µ–Ω–∏—è —Ü–µ–ø–ª—è—é—Ç –æ—Å—å 5/11 –¥–æ–º–æ–≤. üè° –ü–µ—Ä–µ–µ–∑–¥: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å—Å—è –±–ª–∏–∂–µ –∫ 2025 ‚Äî —Ç—Ä–∞–Ω–∑–∏—Ç –ù–µ–ø—Ç—É–Ω–∞ –∏–ª–∏ –Æ–ø–∏—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ 4 –∏–ª–∏ 9 –¥–æ–º —á–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω —Å –ø–µ—Ä–µ–º–µ–Ω–∞–º–∏ –≤ –º–µ—Å—Ç–µ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞. –û—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ç—ã –¥–∞–≤–Ω–æ –¥—É–º–∞–µ—à—å –æ —Å–º–µ–Ω–µ —Å—Ç—Ä–∞–Ω—ã –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–æ–≤. –ö–∞—Ä—Ç–∞ –≤ —Ü–µ–ª–æ–º –æ—á–µ–Ω—å –ø–æ–¥–≤–∏–∂–Ω–∞—è –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ –ø–∞—Ä—É –ª–µ—Ç. –ï—Å—Ç—å –æ —á—ë–º –ø–æ–¥—É–º–∞—Ç—å –∏ –∫ —á–µ–º—É –≥–æ—Ç–æ–≤–∏—Ç—å—Å—è üòâ –•–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∞—è —Å—Ñ–µ—Ä–∞ –≤–∫–ª—é—á–∏—Ç—Å—è –ø–µ—Ä–≤–æ–π ‚Äî –∏ –∫–∞–∫ –ª—É—á—à–µ –µ—ë –ø—Ä–æ–∂–∏—Ç—å?'''}]

    card_path=f'cards/{message.from_user.id}/{text}.jpg'

    with open(card_path, "rb") as image_file:
            base64_image = base64.b64encode(image_file.read()).decode('utf-8')

            start_context.append({"role": "user", "content": [{
                                    "type": "image_url",
                                    "image_url":
                                        {
                                            "url": f"data:image/jpeg;base64,{base64_image}"
                                        }
                                }]})

    start_context.append({"role": "user", "content": f"–Ø –∑–∞–≥—Ä—É–∑–∏–ª —Ç–µ–±–µ –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É —Å –∏–º–µ–Ω–µ–º {text} ! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–æ–±—â–∞–π—Å—è —Å–æ –º–Ω–æ–π –ø–æ –Ω–µ–π."})

    str_start_context = json.dumps(start_context)

    await commands.add_card(owner_id=message.from_user.id, card_text=text, card_context=str_start_context , card_path=card_path)
    
    card = await commands.select_cards_by_path(card_path=card_path)

    # –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –∞–¥–º–∏–Ω—É
    reply_button = InlineKeyboardButton("üí¨ –ü–µ—Ä–µ–π—Ç–∏ –∫ –¥–∏–∞–ª–æ–≥—É", callback_data=f"dialog_{card.card_id}")

    keyboard = InlineKeyboardMarkup().add(reply_button)

    keyboard.add(menu_button)

    success_text = f"""üîÆ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –∑–≤—ë–∑–¥—ã –ø–µ—Ä–µ–¥–æ –º–Ω–æ–π —Ä–∞—Å–∫—Ä—ã—Ç—ã, –∏ —è –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ —Å —Ä–∞–∑–±–æ—Ä–æ–º –∫–∞—Ä—Ç—ã {text}. –ß—Ç–æ –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å: –¥–µ–Ω—å–≥–∏, –ª—é–±–æ–≤—å –∏–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ, –∫–æ–≥–¥–∞ –Ω–∞–∫–æ–Ω–µ—Ü –≤—ã—Å–ø–∏—à—å—Å—è? üòè"""

    await bot.send_photo(chat_id=message.from_user.id, photo=photo, caption=success_text, reply_markup=keyboard)

    await state.finish()


@dp.callback_query_handler(lambda c: c.data == "cancel", state=[AddCard.text, AddCard.photo])
async def ask_cancel(callback_query: types.CallbackQuery, state: FSMContext):
    
    await bot.send_message(chat_id=callback_query.message.chat.id, text="‚ùå –û—Ç–º–µ–Ω–∞", reply_markup=inline_menu_start)

    await callback_query.answer('Finish')
    await state.finish()